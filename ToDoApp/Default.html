<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Todo</title>
    <script src="Scripts/bootstrap.min.js"></script>
    <script src="Scripts/jquery-3.0.0.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <h2>Todo List</h2>
                <table id="todoTable" class="table table-bordered table-condensed table-striped">
                    <thead>
                        <tr>
                            <th>Todo</th>
                            <th>Completed</th>
                            <th>Has Note</th>
                           
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            todoList();
        });

        function todoList() {
            // Call Web API to get a list of Todos
            $.ajax({
                url: '/api/ToDoITems',
                type: 'GET',
                dataType: 'json',
                success: function (toDoItems) {
                    todoListSuccess(toDoItems);
                },
                error: function (request, message, error) {
                    handleException(request, message, error);
                }
            })
        }

        function todoListSuccess(toDoItems) {
            $.each(toDoItems, function (index, todoItem) {
                todoItemAddRow(todoItem);
            })
        }

        function todoItemAddRow(todoItem) {
            if ($("#todoTable tbody").length == 0) {
                $("#todoTable").append("<tbody></tbody>");
            }

            $("#todoTable tbody").append(
                todoItemBuildTableRow(todoItem));
        }

        function todoItemBuildTableRow(todoItem) {
            var ret =
                "<tr>" +
                "<td>" + todoItem.ToDoDescription + "</td>" +
                //"<td>" + todoItem.IsCompleted + "</td>"
                //+ "<td>" + "<input type='checkbox' checked='" + todoItem.IsCompleted + "' disabled='disabled' />" + "</td>" +
                //+ "<td>" + "<input type='checkbox' " + todoItem.HasNote ? "checked='checked'" : "checked=''"+ " disabled='disabled' />" + "</td>" +
                //+ "<td>" + todoItem.HasNote + "</td>" +
                  "<td>" + "<input type='checkbox' " + (todoItem.IsCompleted ? "checked='checked'" : "") + " disabled='disabled' />" + "</td>"
                + "<td>" + "<input type='checkbox' " + (todoItem.HasNote ? "checked='checked'" : "") + " disabled='disabled' />" + "</td>" +

                "</tr>";
            return ret;
        }

        function handleException(request, message,
            error) {
            var msg = "";
            msg += "Code: " + request.status + "\n";
            msg += "Text: " + request.statusText + "\n";
            if (request.responseJSON != null) {
                msg += "Message" +
                    request.responseJSON.Message + "\n";
            }
            alert(msg);
        }
    </script>
</body>
</html>